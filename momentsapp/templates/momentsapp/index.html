<!doctype html>
<html lang="en-IN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#d24b87" />
  <title>Moments — The Cake Shop • Cakes, Pastries, Cupcakes, Waffles, Namkeen</title>
  <meta name="description" content="Moments — The Cake Shop, Mumbai. Premium cakes, pastries, cupcakes, waffles & namkeen. Elegant, modern, and warmly inviting." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700;800&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --cream: 340 60% 97%;
      --brown-900: 330 40% 10%;
      --brown-800: 330 25% 18%;
      --brown-700: 330 20% 24%;
      --gold: 330 68% 52%;
      --gold-600: 330 68% 60%;
      --gold-500: 330 60% 56%;

      --bg: hsl(var(--cream));
      --text: hsl(var(--brown-800));
      --surface: hsl(var(--cream));
      --surface-2: hsl(340 45% 92%);
      --border: hsl(330 25% 82%);
      --accent: hsl(var(--gold));
      --accent-2: hsl(var(--gold-600));
      --muted: hsl(36 30% 88%);
      --shadow: 0 20px 40px rgba(0,0,0,.18);
      --radius: 14px;
      --radius-sm: 10px;
      --radius-lg: 22px;
      --header-h: 74px;
    }

    @media (prefers-color-scheme: dark) {
      :root {
        --bg: hsl(var(--brown-900));
        --text: hsl(var(--cream));
        --surface: hsl(var(--brown-900));
        --surface-2: hsl(var(--brown-700));
        --border: hsl(var(--brown-700));
        --accent: hsl(var(--gold-600));
        --accent-2: hsl(45 70% 62%);
        --muted: hsl(330 20% 18%);
        --shadow: 0 24px 50px rgba(0,0,0,.45);
      }
    }

    *, *::before, *::after { box-sizing: border-box; }
    html, body { height: 100%; }
    html { scroll-behavior: smooth; }
    body {
      margin: 0;
      font-family: "Poppins", system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      color: var(--text);
      background: radial-gradient(1200px 800px at 75% -10%, rgba(201,162,39,0.12), transparent 60%),
                  radial-gradient(800px 600px at 10% -5%, rgba(201,162,39,0.10), transparent 60%),
                  var(--bg);
      line-height: 1.6;
      overflow-x: hidden;
    }
    img { max-width: 100%; display: block; }
    a { color: inherit; text-decoration: none; }
    :focus-visible { outline: 2px solid var(--accent); outline-offset: 2px; border-radius: 6px; }

    /* Layout & Header */
    .container{width:min(1200px,92%);margin-inline:auto} .header{position:sticky;top:0;z-index:1000;height:var(--header-h);backdrop-filter:saturate(140%) blur(6px);background:linear-gradient(180deg, rgba(245,239,230,.85), rgba(245,239,230,.55));border-bottom:1px solid var(--border);padding:0 16px} .header-inner{height:100%;display:flex;align-items:center;justify-content:space-between;gap:16px;max-width:100%}
    .brand{display:flex;align-items:center;gap:12px;min-width:0;flex-shrink:0}.brand-mark{width:38px;height:38px;border-radius:10px;background:radial-gradient(120% 100% at 30% 20%, rgba(255,255,255,.45), rgba(255,255,255,.08) 40%),linear-gradient(135deg,hsl(var(--gold-600)),hsl(var(--gold)));box-shadow:0 6px 18px rgba(210,75,135,.35), inset 0 1px 0 rgba(255,255,255,.35);display:grid;place-items:center;color:#fff;font-weight:800;flex-shrink:0} .brand h1{font-size:clamp(1rem, 2vw, 1.35rem);margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis} .brand div:last-child{min-width:0}
    nav{flex-grow:1} nav ul{list-style:none;margin:0;padding:0;display:flex;gap:8px;align-items:center;justify-content:flex-end} .nav-link{padding:10px 14px;border-radius:999px;border:1px solid transparent;transition:.25s;font-weight:500;white-space:nowrap;font-size:clamp(.9rem, 1.3vw, 1rem)} .nav-link:hover{background:var(--surface-2);border-color:var(--border)} .nav-link.active{background:var(--accent);color:#1d140b;box-shadow:0 6px 18px rgba(210,75,135,.35)} .menu-btn{display:none;border:1px solid var(--border);background:var(--surface);border-radius:10px;padding:10px;flex-shrink:0;cursor:pointer;gap:5px} .menu-btn span{display:block;width:22px;height:2px;background:var(--text);border-radius:2px;transition:all .3s ease} .menu-btn[aria-expanded="true"] span:nth-child(1){transform:translateY(7px) rotate(45deg)} .menu-btn[aria-expanded="true"] span:nth-child(2){opacity:0} .menu-btn[aria-expanded="true"] span:nth-child(3){transform:translateY(-7px) rotate(-45deg)}
    @media (max-width:920px){.brand h1{font-size:clamp(.95rem, 1.8vw, 1.2rem)}} @media (max-width:780px){ .menu-btn{display:inline-flex;flex-direction:column;justify-content:center;align-items:center;flex-shrink:0} nav{position:fixed;inset:var(--header-h) 0 auto 0;background:rgba(245,239,230,.98);backdrop-filter:saturate(140%) blur(8px);border-bottom:1px solid var(--border);transform:translateY(-100%);transition:transform .35s ease;width:100%;z-index:999;box-shadow:0 8px 24px rgba(0,0,0,.12)} nav.open{transform:translateY(0)} nav ul{padding:20px 14px;flex-direction:column;align-items:stretch;gap:6px} .nav-link{text-align:center;padding:14px;font-size:clamp(.95rem, 1.5vw, 1rem);border-radius:12px} .brand h1{font-size:clamp(.85rem, 1.5vw, 1.1rem)}} @media (max-width:480px){.header{padding:0 12px} .brand h1{font-size:clamp(.75rem, 1.2vw, 1rem)} .brand-mark{width:32px;height:32px;font-size:.9rem} .nav-link{padding:12px;font-size:.95rem}}

    /* Hero */
    .hero { position: relative; min-height: clamp(560px, 92vh, 900px); display: grid; place-items: center; overflow: clip; }
    .hero::before { content: ""; position: absolute; inset: 0; background: url('https://images.unsplash.com/photo-1541976076758-347942db1974?q=80&w=2000&auto=format&fit=crop') center/cover no-repeat; transform: translate3d(0, var(--parallax, 0px), 0); will-change: transform; filter: saturate(110%) contrast(105%); }
    .hero::after { content: ""; position: absolute; inset: 0; background: linear-gradient(180deg, rgba(42,26,16,.55), rgba(42,26,16,.35) 30%, rgba(245,239,230,.2) 75%, rgba(245,239,230,1)); mix-blend-mode: multiply; }
    .hero-inner { position: relative; z-index: 1; text-align: center; padding: 80px 0 120px; }
    .eyebrow { display: inline-block; padding: 6px 12px; border-radius: 999px; background: rgba(201,162,39,.18); color: hsl(var(--gold)); border: 1px solid rgba(201,162,39,.35); letter-spacing: .2em; text-transform: uppercase; font-size: .72rem; font-weight: 600; backdrop-filter: blur(4px); }
    .hero h2 { font-family: "Playfair Display", serif; font-size: clamp(2.2rem, 5vw, 4.4rem); line-height: 1.05; margin: 18px 0 12px; text-shadow: 0 10px 30px rgba(0,0,0,.35); color: #fff; }
    .hero p { color: #fff; opacity: .9; font-size: clamp(1rem, 2.1vw, 1.25rem); max-width: 740px; margin: 0 auto 26px; text-shadow: 0 8px 22px rgba(0,0,0,.35); }
    .cta-row { display: flex; justify-content: center; gap: 12px; flex-wrap: wrap; }
    .btn { display: inline-flex; align-items: center; gap: 10px; padding: 12px 18px; border-radius: 999px; border: 1px solid var(--border); background: var(--surface); transition: transform .15s ease, box-shadow .3s ease, background .3s ease; font-weight: 600; }
    .btn:hover { transform: translateY(-2px); box-shadow: var(--shadow); }
    .btn.primary { background: linear-gradient(135deg, var(--accent-2), var(--accent)); color: #1d140b; border-color: rgba(201,162,39,.6); box-shadow: 0 10px 26px rgba(201,162,39,.35); }

    /* Section shells */
    .section { padding: clamp(60px, 10vw, 90px) 0; position: relative; }
    .section .heading { display: grid; gap: 10px; margin-bottom: 34px; }
    .section .heading h3 { font-family: "Playfair Display", serif; font-size: clamp(1.6rem, 3vw, 2.4rem); margin: 0; }
    .section .heading p { margin: 0; opacity: .8; max-width: 720px; font-size: clamp(.9rem, 1.5vw, 1rem); }
    @media (max-width: 620px) { .section { padding: clamp(40px, 8vw, 60px) 0; } }

    /* About */
    .about { background: radial-gradient(900px 480px at -10% 0%, rgba(201,162,39,.12), transparent 50%), var(--bg); }
    .about-grid { display: grid; grid-template-columns: 1.1fr .9fr; gap: clamp(20px, 5vw, 38px); align-items: center; }
    .about .img-wrap { border-radius: var(--radius-lg); overflow: hidden; box-shadow: var(--shadow); transform: translateZ(0); }
    .about .img-wrap img { width: 100%; height: 100%; object-fit: cover; transform: scale(1.02); transition: transform 1.2s ease; }
    .about .img-wrap:hover img { transform: scale(1.08); }
    @media (max-width: 900px) { .about-grid { grid-template-columns: 1fr; gap: clamp(16px, 4vw, 26px); } }

    /* Cakes */
    .cakes { background:
      radial-gradient(1000px 600px at 110% -10%, rgba(201,162,39,.10), transparent 50%),
      linear-gradient(180deg, rgba(255,255,255,.45), rgba(255,255,255,0)), var(--bg);
    }
    .card-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: clamp(16px, 3vw, 22px); }
    @media (max-width: 990px) { .card-grid { grid-template-columns: repeat(2, 1fr); gap: clamp(14px, 2.5vw, 20px); } }
    @media (max-width: 620px) { .card-grid { grid-template-columns: 1fr; gap: clamp(12px, 2vw, 18px); } }

    .cake-card { position: relative; border-radius: 18px; padding: 16px; background: linear-gradient(180deg, rgba(255,255,255,.75), rgba(255,255,255,.55)); border: 1px solid var(--border); box-shadow: 0 15px 30px rgba(42,26,16,.12); transform-style: preserve-3d; perspective: 1000px; transition: transform .18s ease, box-shadow .3s ease; cursor: pointer; }
    .cake-card:hover { box-shadow: 0 30px 60px rgba(42,26,16,.18); }
    .cake-img { height: 220px; border-radius: 14px; overflow: hidden; transform: translateZ(0); }
    .cake-img img { width: 100%; height: 100%; object-fit: cover; transition: transform .8s ease; }
    .cake-card:hover .cake-img img { transform: scale(1.06); }
    .chip { position: absolute; top: 22px; left: 22px; padding: 6px 10px; background: rgba(201,162,39,.18); color: hsl(var(--gold)); border: 1px solid rgba(201,162,39,.35); border-radius: 999px; font-size: .8rem; font-weight: 600; backdrop-filter: blur(3px); }
    .card-body { padding: 14px 6px 6px; }
    .card-title { font-family: "Playfair Display", serif; font-weight: 700; font-size: 1.2rem; margin: 0 0 8px; }
    .card-desc { margin: 0 0 12px; opacity: .8; }
    .price { font-weight: 700; color: hsl(var(--gold)); }

    /* Modal */
    .modal { position: fixed; inset: 0; display: none; place-items: center; background: rgba(0,0,0,.45); padding: 20px; z-index: 2000; }
    .modal.open { display: grid; }
    .modal-card { width: min(860px, 96vw); background: var(--surface); color: var(--text); border-radius: 16px; overflow: hidden; border: 1px solid var(--border); box-shadow: var(--shadow); display: grid; grid-template-columns: 1.15fr .85fr; }
    .modal-media { min-height: 280px; background: #000; }
    .modal-media img { width: 100%; height: 100%; object-fit: cover; }
    .modal-body { padding: 22px; display: grid; align-content: start; gap: 10px; }
    .modal-body h4 { font-family: "Playfair Display", serif; font-size: 1.6rem; margin: 0; }
    .modal-body p { margin: 0; opacity: .85; }
    .modal-actions { display: flex; gap: 10px; margin-top: 14px; }
    .close-x { position: absolute; top: 14px; right: 16px; background: var(--surface); border: 1px solid var(--border); border-radius: 10px; padding: 6px 10px; cursor: pointer; }
    @media (max-width: 860px) { .modal-card { grid-template-columns: 1fr; } }

    /* Contact */
    .contact .grid { display: grid; grid-template-columns: 1.1fr .9fr; gap: clamp(16px, 4vw, 22px); }
    @media (max-width: 900px) { .contact .grid { grid-template-columns: 1fr; } }
    .field { display: grid; gap: 6px; margin-bottom: 14px; }
    .field label { font-weight: 600; font-size: clamp(.9rem, 1.3vw, 1rem); }
    .input, .textarea { border: 1px solid var(--border); background: var(--surface); padding: clamp(10px, 2vw, 12px) clamp(12px, 2vw, 14px); border-radius: 12px; font: inherit; color: inherit; font-size: clamp(.9rem, 1.2vw, 1rem); }
    .textarea { min-height: clamp(100px, 20vh, 120px); resize: vertical; }
    .error { color: #8b1e1e; font-size: clamp(.75rem, 1vw, .85rem); min-height: 18px; }
    .form-card { background: linear-gradient(180deg, rgba(255,255,255,.85), rgba(255,255,255,.65)); border: 1px solid var(--border); border-radius: 16px; padding: clamp(14px, 3vw, 18px); box-shadow: var(--shadow); }
    .map { border: 0; width: 100%; height: 100%; min-height: clamp(280px, 50vh, 360px); border-radius: 16px; overflow: hidden; box-shadow: var(--shadow); }

    /* Socials */
    .socials { display: flex; gap: 12px; }
    .social-btn { width: 42px; height: 42px; display: grid; place-items: center; border-radius: 10px; border: 1px solid var(--border); background: var(--surface); transition: box-shadow .3s ease, transform .15s ease, background .3s ease; }
    .social-btn:hover { background: var(--surface-2); box-shadow: 0 10px 24px rgba(201,162,39,.25), 0 0 0 4px rgba(201,162,39,.15); transform: translateY(-2px); }

    /* Footer */
    footer { padding: 40px 0; border-top: 1px solid var(--border); background: linear-gradient(180deg, rgba(255,255,255,.6), rgba(255,255,255,.35)); }
    .foot { display: flex; align-items: center; justify-content: space-between; gap: 16px; flex-wrap: wrap; }

    /* Utilities: reveal on scroll */
    [data-animate] { opacity: 0; transform: translateY(18px); transition: opacity .8s ease, transform .8s ease; }
    .in-view { opacity: 1 !important; transform: none !important; }

    /* Scroll-to-top */
    .to-top { position: fixed; right: 18px; bottom: 18px; width: 46px; height: 46px; border-radius: 50%; display: grid; place-items: center; background: var(--accent); color: #1d140b; border: 1px solid rgba(201,162,39,.45); box-shadow: 0 12px 28px rgba(201,162,39,.35); cursor: pointer; transform: translateY(120%); transition: transform .3s ease, opacity .3s ease; }
    .to-top.show { transform: translateY(0); }
  </style>
</head>
<body>
  <header class="header">
    <div class="container header-inner">
      <div class="brand"><div class="brand-mark">M</div><div><h1 style="margin:0">Moments — The Cake Shop</h1><div class="tagline">Cakes • Pastries • Cupcakes • Waffles</div></div></div>
      <button class="menu-btn" id="menuBtn" aria-label="Open menu" aria-controls="siteNav" aria-expanded="false"><span></span><span></span><span></span></button>
      <nav id="siteNav" aria-label="Primary">
        <ul>
          <li><a class="nav-link" href="{% url 'momentsapp:index' %}">Home</a></li>
          <li><a class="nav-link" href="{% url 'momentsapp:about' %}">About</a></li>
          <li><a class="nav-link" href="{% url 'momentsapp:cakes' %}">Fancy Cakes</a></li>
          <li><a class="nav-link" href="{% url 'momentsapp:contact' %}">Contact</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- Hero -->
  <section id="home" class="hero" aria-label="Welcome to Moments — The Cake Shop">
    <div class="hero-inner container" data-animate>
      <span class="eyebrow">Sweet moments. Crafted daily.</span>
      <h2>Where every bite becomes a memory.</h2>
      <p>Step into Moments — The Cake Shop in Mumbai. Premium cakes, delicate pastries, fluffy waffles, and savory namkeen in a warm, modern space.</p>
      <div class="cta-row">
        <a class="btn primary" href="{% url 'momentsapp:cakes' %}">Explore Fancy Cakes</a>
        <a class="btn" href="{% url 'momentsapp:about' %}">Our Story</a>
      </div>
    </div>
  </section>

  <!-- About -->
  <section id="about" class="section about">
    <div class="container">
      <div class="heading" data-animate>
        <h3>Our Story</h3>
        <p>Moments began in Mumbai with a love for celebrations. We bake in small batches with premium ingredients and an eye for detail—curating flavors that feel joyful and unforgettable.</p>
      </div>
      <div class="about-grid">
        <div class="img-wrap" data-animate>
          <img src="https://images.unsplash.com/photo-1504754524776-8f4f37790ca0?q=80&w=1600&auto=format&fit=crop" alt="Pouring latte art in a warm café setting" />
        </div>
        <div data-animate>
          <h4 style="font-family:'Playfair Display',serif;font-size:1.4rem;margin:0 0 10px">Craft, Care, and Conversation</h4>
          <p>We believe the best cafés are living rooms for the city — places where ideas spark and friendships deepen. Our beans are ethically sourced, our cakes crafted with seasonal flavors, our atmosphere lit with a golden, welcoming hue.</p>
          <p>Take a seat. Breathe in the aroma. Let the moment steep.</p>
          <div style="display:flex; gap:10px; margin-top:14px">
            <a class="btn" href="{% url 'momentsapp:contact' %}">Visit Us</a>
            <a class="btn primary" href="{% url 'momentsapp:cakes' %}">Today's Specials</a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Fancy Cakes -->
  <section id="cakes" class="section cakes">
    <div class="container">
      <div class="heading" data-animate>
        <h3>Fancy Cakes</h3>
        <p>Signature creations with elegant finishes, subtle 3D depth, and flavors that linger. Hover to feel the tilt, click to see details and price.</p>
      </div>
      <div class="card-grid" id="cakeGrid">
        <!-- Cards injected by JS -->
      </div>
    </div>
  </section>

  <!-- Contact -->
  <section id="contact" class="section contact">
    <div class="container">
      <div class="heading" data-animate>
        <h3>Contact Us</h3>
        <p>We'd love to hear from you. Send us a note or come by for a warm cup and a friendly chat.</p>
      </div>
      <div class="grid">
        <div class="form-card">
          <form id="contactForm" novalidate>
            <div class="field">
              <label for="name">Name</label>
              <input class="input" id="name" name="name" type="text" placeholder="Your name" required minlength="2" />
              <div class="error" id="nameError"></div>
            </div>
            <div class="field">
              <label for="email">Email</label>
              <input class="input" id="email" name="email" type="email" placeholder="you@example.com" required />
              <div class="error" id="emailError"></div>
            </div>
            <div class="field">
              <label for="message">Message</label>
              <textarea class="textarea" id="message" name="message" placeholder="Say hello..." required minlength="10"></textarea>
              <div class="error" id="messageError"></div>
            </div>
            <div style="display:flex; gap:10px; align-items:center; justify-content:space-between; flex-wrap:wrap">
              <button class="btn primary" type="submit">Send Message</button>
              <div class="socials" aria-label="Social media">
                <a class="social-btn" href="https://instagram.com" target="_blank" rel="noreferrer" aria-label="Instagram" title="Instagram">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5Z" stroke="currentColor" stroke-width="1.5"/><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37Z" stroke="currentColor" stroke-width="1.5"/><path d="M17.5 6.5h.01" stroke="currentColor" stroke-linecap="round"/></svg>
                </a>
                <a class="social-btn" href="https://facebook.com" target="_blank" rel="noreferrer" aria-label="Facebook" title="Facebook">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3V2Z" stroke="currentColor" stroke-width="1.5"/></svg>
                </a>
                <a class="social-btn" href="https://x.com" target="_blank" rel="noreferrer" aria-label="Twitter" title="Twitter">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 4l16 16M20 4 4 20" stroke="currentColor" stroke-width="1.5"/><path d="M17 4H14L7 14v6h3l7-10V4Z" stroke="currentColor" stroke-width="1.5" opacity=".4"/></svg>
                </a>
              </div>
            </div>
          </form>
        </div>
        <div>
          <iframe class="map" title="Moments — The Cake Shop, Mumbai location" loading="lazy" allowfullscreen src="https://www.google.com/maps?q=19.0760,72.8777&z=13&output=embed"></iframe>
        </div>
      </div>
    </div>
  </section>

  <footer>
    <div class="container foot">
      <p style="margin:0">© <span id="year"></span> Moments — The Cake Shop • Crafted with care</p>
      <div style="display:flex; gap:10px">
        <a class="btn" href="#home">Back to top</a>
      </div>
    </div>
  </footer>

  <!-- Modal -->
  <div class="modal" id="cakeModal" role="dialog" aria-modal="true" aria-labelledby="modalTitle" aria-hidden="true">
    <div class="modal-card">
      <button class="close-x" id="closeModal" aria-label="Close">✕</button>
      <div class="modal-media"><img id="modalImg" alt="" /></div>
      <div class="modal-body">
        <h4 id="modalTitle"></h4>
        <p id="modalDesc"></p>
        <p class="price" id="modalPrice"></p>
        <div class="modal-actions">
          <button class="btn primary" id="orderBtn" type="button">Add to order</button>
          <button class="btn" id="shareBtn" type="button">Share</button>
        </div>
      </div>
    </div>
  </div>

  <button class="to-top" id="toTop" aria-label="Scroll to top" title="Back to top">↑</button>

  <script>
    // Parallax hero effect
    const hero = document.querySelector('.hero');
    const parallax = () => {
      if (!hero) return;
      const y = window.scrollY * 0.35;
      hero.style.setProperty('--parallax', (y * 0.6) + 'px');
    };
    window.addEventListener('scroll', parallax);

    // Mobile menu toggle
    const menuBtn = document.getElementById('menuBtn');
    const nav = document.getElementById('siteNav');
    menuBtn.addEventListener('click', () => {
      const open = nav.classList.toggle('open');
      menuBtn.setAttribute('aria-expanded', String(open));
    });
    nav.addEventListener('click', (e) => {
      if (e.target.closest('a')) nav.classList.remove('open');
    });

    // Reveal on scroll
    const revealEls = document.querySelectorAll('[data-animate]');
    const io = new IntersectionObserver((entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) entry.target.classList.add('in-view');
      });
    }, { threshold: .18 });
    revealEls.forEach((el) => io.observe(el));

    // Scrollspy
    const sections = [...document.querySelectorAll('section[id]')];
    const links = [...document.querySelectorAll('.nav-link')];

    // Highlight current page in nav
    const current = window.location.pathname;
    links.forEach(l => {
      const href = l.getAttribute('href') || '';
      if (href === current || (current === '/' && href.includes('index'))) {
        l.classList.add('active');
      }
    });

    // Optional: section-based highlight when anchors are present
    const spy = new IntersectionObserver((entries) => {
      entries.forEach((entry) => {
        const id = entry.target.getAttribute('id');
        const link = links.find(l => (l.getAttribute('href') || '').endsWith('#' + id));
        if (entry.isIntersecting && link) {
          links.forEach(l => l.classList.remove('active'));
          link.classList.add('active');
          history.replaceState(null, '', '#' + id);
        }
      });
    }, { rootMargin: '-50% 0px -45% 0px', threshold: 0 });
    sections.forEach(s => spy.observe(s));

    // Cakes data & rendering
    const cakes = [
      {
        title: 'Rose Velvet Layer Cake',
        price: '₹320 / slice',
        img: 'https://images.unsplash.com/photo-1578985545062-69928b1d9587?q=80&w=1600&auto=format&fit=crop',
        desc: 'Silky rose-infused layers with cream cheese frosting and edible flowers.'
      },
      {
        title: 'Triple Chocolate Delight',
        price: '₹300 / slice',
        img: 'https://images.unsplash.com/photo-1578985545062-69928b1d9587?q=80&w=1600&auto=format&fit=crop',
        desc: 'Dark, milk, and white chocolate sponge with fudgy ganache center.'
      },
      {
        title: 'Strawberry Dreams',
        price: '₹280 / slice',
        img: 'https://images.unsplash.com/photo-1578985545062-69928b1d9587?q=80&w=1600&auto=format&fit=crop',
        desc: 'Fresh strawberry sponge with whipped cream and strawberry compote.'
      },
      {
        title: 'Mango Paradise',
        price: '₹280 / slice',
        img: 'https://images.unsplash.com/photo-1578985545062-69928b1d9587?q=80&w=1600&auto=format&fit=crop',
        desc: 'Tropical mango sponge with mango curd and coconut whipped cream.'
      },
      {
        title: 'Pistachio Dream Cake',
        price: '₹260 / slice',
        img: 'https://images.unsplash.com/photo-1578985545062-69928b1d9587?q=80&w=1600&auto=format&fit=crop',
        desc: 'Delicate pistachio sponge with pistachio buttercream and crushed pistachios.'
      },
      {
        title: 'Caramel Swirl Cheesecake',
        price: '₹310 / slice',
        img: 'https://images.unsplash.com/photo-1578985545062-69928b1d9587?q=80&w=1600&auto=format&fit=crop',
        desc: 'Creamy cheesecake with salted caramel swirl and graham cracker crust.'
      }
    ];

    const grid = document.getElementById('cakeGrid');
    cakes.forEach((c, i) => {
      const card = document.createElement('article');
      card.className = 'cake-card';
      card.setAttribute('tabindex', '0');
      card.setAttribute('aria-label', c.title + ' — details');
      card.innerHTML = `
        <div class="chip">Signature</div>
        <div class="cake-img"><img src="${c.img}" alt="${c.title}" loading="lazy"></div>
        <div class="card-body">
          <h4 class="card-title">${c.title}</h4>
          <p class="card-desc">${c.desc}</p>
          <div class="price">${c.price}</div>
        </div>
      `;

      // 3D tilt effect
      const damp = 18;
      card.addEventListener('mousemove', (e) => {
        const r = card.getBoundingClientRect();
        const x = e.clientX - r.left, y = e.clientY - r.top;
        const rx = ((y - r.height/2) / r.height) * -damp;
        const ry = ((x - r.width/2) / r.width) * damp;
        card.style.transform = `perspective(900px) rotateX(${rx}deg) rotateY(${ry}deg)`;
      });
      card.addEventListener('mouseleave', () => { card.style.transform = ''; });

      // Open modal
      card.addEventListener('click', () => openModal(c));
      card.addEventListener('keydown', (e) => { if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); openModal(c); } });

      grid.appendChild(card);
    });

    // Modal logic
    const modal = document.getElementById('cakeModal');
    const modalImg = document.getElementById('modalImg');
    const modalTitle = document.getElementById('modalTitle');
    const modalDesc = document.getElementById('modalDesc');
    const modalPrice = document.getElementById('modalPrice');
    const closeModalBtn = document.getElementById('closeModal');
    const orderBtn = document.getElementById('orderBtn');
    const shareBtn = document.getElementById('shareBtn');

    function openModal(cake){
      modalImg.src = cake.img;
      modalImg.alt = cake.title;
      modalTitle.textContent = cake.title;
      modalDesc.textContent = cake.desc;
      modalPrice.textContent = cake.price;
      modal.classList.add('open');
      document.body.style.overflow = 'hidden';
      closeModalBtn.focus();
    }
    function closeModal(){ modal.classList.remove('open'); document.body.style.overflow = ''; }
    closeModalBtn.addEventListener('click', closeModal);
    modal.addEventListener('click', (e) => { if (e.target === modal) closeModal(); });
    window.addEventListener('keydown', (e) => { if (e.key === 'Escape' && modal.classList.contains('open')) closeModal(); });
    orderBtn.addEventListener('click', () => { alert('Added to order (demo). Visit us in Mumbai to place your order!'); });
    shareBtn.addEventListener('click', async () => {
      const data = { title: modalTitle.textContent, text: modalDesc.textContent, url: location.href };
      if (navigator.share) { try { await navigator.share(data); } catch (e) {} }
      else { try { await navigator.clipboard.writeText(location.href); alert('Link copied to clipboard'); } catch (e) { alert('Share not supported'); } }
    });

    // Contact validation
    const form = document.getElementById('contactForm');
    const nameEl = document.getElementById('name');
    const emailEl = document.getElementById('email');
    const msgEl = document.getElementById('message');
    const nameErr = document.getElementById('nameError');
    const emailErr = document.getElementById('emailError');
    const msgErr = document.getElementById('messageError');

    const emailRe = /^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/i;

    function validate(){
      let ok = true;
      nameErr.textContent = '';
      emailErr.textContent = '';
      msgErr.textContent = '';
      if (nameEl.value.trim().length < 2) { nameErr.textContent = 'Please enter at least 2 characters.'; ok = false; }
      if (!emailRe.test(emailEl.value.trim())) { emailErr.textContent = 'Please enter a valid email.'; ok = false; }
      if (msgEl.value.trim().length < 10) { msgErr.textContent = 'Please enter at least 10 characters.'; ok = false; }
      return ok;
    }

    form.addEventListener('submit', (e) => {
      e.preventDefault();
      if (!validate()) return;
      form.reset();
      alert('Thank you! Your message has been received.');
    });
    ;['input','blur'].forEach(evt => {
      nameEl.addEventListener(evt, validate);
      emailEl.addEventListener(evt, validate);
      msgEl.addEventListener(evt, validate);
    });

    // Scroll-to-top
    const toTop = document.getElementById('toTop');
    const topIo = new IntersectionObserver(([entry]) => {
      toTop.classList.toggle('show', !entry.isIntersecting);
    }, { threshold: 0 });
    topIo.observe(document.querySelector('#home'));
    toTop.addEventListener('click', () => window.scrollTo({ top: 0, behavior: 'smooth' }));

    // Year
    document.getElementById('year').textContent = new Date().getFullYear();
  </script>
</body>
</html>
